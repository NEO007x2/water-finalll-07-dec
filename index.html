<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Robot Control Panel</title>
  <style>
    /* ===== CSS Variables ===== */
    :root {
      --background: #0a0a0a;
      --foreground: #fafafa;
      --card: #141414;
      --primary: #3b82f6;
      --primary-foreground: #ffffff;
      --secondary: #1f1f1f;
      --muted: #262626;
      --muted-foreground: #a3a3a3;
      --border: #262626;
      --radius: 12px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--background);
      color: var(--foreground);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ===== Page Sections ===== */
    .page {
      display: none;
      min-height: 100vh;
    }

    .page.active {
      display: block;
    }

    /* ===== Navigation ===== */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 2rem;
      background-color: var(--card);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-brand {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 1.25rem;
      font-weight: bold;
    }

    .nav-links {
      display: flex;
      gap: 1.5rem;
    }

    .nav-links a {
      color: var(--muted-foreground);
      transition: color 0.2s;
      cursor: pointer;
      text-decoration: none;
    }

    .nav-links a:hover,
    .nav-links a.active {
      color: var(--primary);
    }

    /* ===== Hero Section ===== */
    .hero {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 60vh;
      padding: 4rem 2rem;
      text-align: center;
      background: linear-gradient(180deg, var(--card) 0%, var(--background) 100%);
    }

    .hero-content h1 {
      font-size: 3rem;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--foreground), var(--primary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-content p {
      color: var(--muted-foreground);
      font-size: 1.25rem;
      max-width: 600px;
      margin: 0 auto 2rem;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius);
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      text-decoration: none;
    }

    .btn-primary {
      background-color: var(--primary);
      color: var(--primary-foreground);
    }

    .btn-primary:hover {
      background-color: #2563eb;
      transform: scale(1.02);
    }

    /* ===== Features ===== */
    .features {
      padding: 4rem 2rem;
    }

    .section-title {
      text-align: center;
      font-size: 2rem;
      margin-bottom: 2rem;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
      max-width: 1200px;
      margin: 0 auto;
    }

    .feature-card {
      background-color: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      text-align: center;
    }

    .feature-icon {
      font-size: 2.5rem;
      margin-bottom: 1rem;
    }

    /* ===== Auth Modal ===== */
    .auth-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.9);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      overflow: hidden;
    }

    .auth-modal.active {
      display: flex;
    }

    .auth-card {
      background-color: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 2rem;
      width: 90%;
      max-width: 400px;
      animation: slideDown 0.3s ease-out;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .auth-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .auth-tabs {
      display: flex;
      margin-bottom: 1.5rem;
      border-radius: var(--radius);
      overflow: hidden;
      background-color: var(--muted);
    }

    .tab-btn {
      flex: 1;
      padding: 0.75rem;
      background: none;
      border: none;
      color: var(--muted-foreground);
      cursor: pointer;
      transition: all 0.2s;
    }

    .tab-btn.active {
      background-color: var(--primary);
      color: var(--primary-foreground);
    }

    .auth-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .auth-form.hidden {
      display: none;
    }

    .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .form-group label {
      font-size: 0.875rem;
      color: var(--muted-foreground);
    }

    .form-group input {
      padding: 0.75rem 1rem;
      background-color: var(--secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      color: var(--foreground);
      font-size: 1rem;
    }

    .form-group input:focus {
      outline: none;
      border-color: var(--primary);
    }

    .close-btn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: var(--muted-foreground);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .close-btn:hover {
      color: var(--foreground);
    }

    /* ===== Control Panel ===== */
    .header {
      height: 56px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1rem;
      background-color: var(--background);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-content {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .header-actions {
      display: flex;
      gap: 0.75rem;
    }

    .btn-secondary {
      padding: 0.5rem 1rem;
      background-color: var(--secondary);
      color: var(--foreground);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-secondary:hover {
      background-color: var(--muted);
    }

    .main {
      padding: 1rem;
      max-width: 1600px;
      margin: 0 auto;
    }

    .card {
      background-color: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      overflow: hidden;
      margin-bottom: 1.5rem;
    }

    .card-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    .card-title {
      font-size: 1.125rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .card-description {
      color: var(--muted-foreground);
      font-size: 0.875rem;
    }

    .card-content {
      padding: 1.5rem;
    }

    .three-column-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    /* Mobile Portrait: Camera first, then Drive and Functions */
    .drive-card {
      order: 2;
    }

    .camera-card {
      order: 1;
    }

    .functions-card {
      order: 3;
    }

    /* Mobile Landscape: Drive left, Camera center, Functions right */
    @media (max-width: 1023px) and (orientation: landscape) {
      .three-column-grid {
        grid-template-columns: 0.8fr 1.5fr 0.8fr;
        gap: 0.75rem;
      }

      .drive-card {
        order: 1;
      }
      
      .camera-card {
        order: 2;
      }
      
      .functions-card {
        order: 3;
      }

      .main {
        padding: 0.5rem;
      }

      .card-header {
        padding: 0.75rem;
      }

      .card-content {
        padding: 0.75rem;
      }

      .card-title {
        font-size: 0.875rem;
      }

      .card-description {
        font-size: 0.75rem;
      }

      .drive-btn {
        width: 48px;
        height: 48px;
        font-size: 1.25rem;
      }

      .drive-controls {
        gap: 0.5rem;
      }

      .drive-row {
        gap: 0.5rem;
      }

      .camera-view {
        min-height: 200px;
      }

      .functions-list {
        gap: 0.75rem;
      }

      .function-item {
        padding: 0.5rem;
        font-size: 0.875rem;
      }

      .btn {
        padding: 0.5rem 0.75rem;
        font-size: 0.875rem;
      }
    }

    /* Desktop: Drive left, Camera center, Functions right */
    @media (min-width: 1024px) {
      .three-column-grid {
        grid-template-columns: 1fr 2fr 1fr;
      }

      .drive-card {
        order: 1;
      }
      
      .camera-card {
        order: 2;
      }
      
      .functions-card {
        order: 3;
      }
    }

    .drive-controls {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      align-items: center;
    }

    .drive-row {
      display: flex;
      gap: 1rem;
    }

    .drive-btn {
      width: 64px;
      height: 64px;
      background-color: var(--primary);
      color: var(--primary-foreground);
      border: none;
      border-radius: var(--radius);
      cursor: pointer;
      font-size: 1.5rem;
      transition: all 0.2s;
    }

    .drive-btn:hover {
      background-color: #2563eb;
      transform: scale(1.05);
    }

    .camera-view {
      aspect-ratio: 4/3;
      min-height: 300px;
      background-color: var(--muted);
      border-radius: var(--radius);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @media (min-width: 1024px) {
      .camera-view {
        min-height: 400px;
      }
    }

    .camera-placeholder {
      text-align: center;
      padding: 2rem;
      color: var(--muted-foreground);
    }

    .functions-list {
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
    }

    .function-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem;
      background-color: rgba(38, 38, 38, 0.5);
      border-radius: var(--radius);
    }

    .function-label {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .switch {
      position: relative;
      width: 44px;
      height: 24px;
    }

    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--secondary);
      border-radius: 24px;
      transition: 0.3s;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 18px;
      width: 18px;
      left: 3px;
      bottom: 3px;
      background-color: var(--foreground);
      border-radius: 50%;
      transition: 0.3s;
    }

    input:checked + .slider {
      background-color: var(--primary);
    }

    input:checked + .slider:before {
      transform: translateX(20px);
    }

    .full-width {
      width: 100%;
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      background-color: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 1rem 1.5rem;
      display: none;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      z-index: 1001;
    }

    .toast.show {
      display: block;
      animation: slideUp 0.3s ease-out;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
</head>
<body>
  <!-- HOME PAGE -->
  <div id="homePage" class="page active">
    <!-- Navigation -->
    <nav class="navbar">
      <div class="nav-brand">
        <span>ü§ñ Robot Control</span>
      </div>
      <div class="nav-links">
        <a class="active">Home</a>
        <a id="navControlLink">Control Panel</a>
        <a id="navAuthLink">Login</a>
      </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1>Control Your Robot</h1>
        <p>Advanced ESP32-powered robot control system with real-time camera streaming and remote operations</p>
        <button class="btn btn-primary" id="heroCtaBtn">Get Started</button>
      </div>
    </section>

    <!-- Features Section -->
    <section class="features">
      <h2 class="section-title">Features</h2>
      <div class="features-grid">
        <div class="feature-card">
          <div class="feature-icon">üéÆ</div>
          <h3>Drive Controls</h3>
          <p>Control your robot movement with WASD keys or on-screen buttons</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üì∑</div>
          <h3>Live Camera</h3>
          <p>Real-time video streaming from ESP32-CAM module</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">üíß</div>
          <h3>Water Pump</h3>
          <p>Remote control of water pump for plant watering</p>
        </div>
        <div class="feature-card">
          <div class="feature-icon">ü§ñ</div>
          <h3>Robotic Arms</h3>
          <p>Adjustable arm positions for various tasks</p>
        </div>
      </div>
    </section>
  </div>

  <!-- CONTROL PANEL PAGE -->
  <div id="controlPage" class="page">
    <header class="header">
      <div class="header-content">
        <span>ü§ñ Robot Control Panel</span>
      </div>
      <div class="header-actions">
        <button class="btn-secondary" id="homeBtn">Home</button>
        <button class="btn-secondary" id="logoutBtn">Logout</button>
      </div>
    </header>

    <main class="main">
      <div class="three-column-grid">
        <!-- Drive Controls -->
        <div class="card drive-card">
          <div class="card-header">
            <div class="card-title">Drive Controls</div>
            <div class="card-description">Use WASD keys or click buttons</div>
          </div>
          <div class="card-content">
            <div class="drive-controls">
              <div class="drive-row">
                <button class="drive-btn" data-direction="forward">‚Üë</button>
              </div>
              <div class="drive-row">
                <button class="drive-btn" data-direction="left">‚Üê</button>
                <button class="drive-btn" data-direction="backward">‚Üì</button>
                <button class="drive-btn" data-direction="right">‚Üí</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Camera View -->
        <div class="card camera-card">
          <div class="card-header">
            <div class="card-title">üìπ Live Camera View</div>
            <div class="card-description">ESP32 camera stream</div>
          </div>
          <div class="card-content">
            <div class="camera-view">
              <div class="camera-placeholder">
                <p style="font-size: 3rem;">üì∑</p>
                <p>Camera stream will appear here when ESP32 is connected</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Robot Functions -->
        <div class="card functions-card">
          <div class="card-header">
            <div class="card-title">Robot Functions</div>
            <div class="card-description">Control water and arms</div>
          </div>
          <div class="card-content">
            <div class="functions-list">
              <div class="function-item">
                <div class="function-label">
                  <span>üíß Water Pump</span>
                </div>
                <label class="switch">
                  <input type="checkbox" id="pumpToggle">
                  <span class="slider"></span>
                </label>
              </div>
              <div class="function-item">
                <div class="function-label">
                  <span id="armsLabel">ü§ñ Arms (90¬∞)</span>
                </div>
                <label class="switch">
                  <input type="checkbox" id="armsToggle">
                  <span class="slider"></span>
                </label>
              </div>
              <button class="btn btn-primary full-width" id="captureBtn">üì∑ Capture Photo</button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- AUTH MODAL -->
  <div id="authModal" class="auth-modal">
    <div class="auth-card">
      <button class="close-btn" id="closeAuthModal">√ó</button>
      <div class="auth-header">
        <h1>ü§ñ Welcome Back</h1>
        <p>Sign in to control your robot</p>
      </div>

      <div class="auth-tabs">
        <button class="tab-btn active" id="loginTab">Login</button>
        <button class="tab-btn" id="signupTab">Sign Up</button>
      </div>

      <form class="auth-form" id="loginForm">
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="loginEmail" placeholder="Enter your email" required>
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="loginPassword" placeholder="Enter your password" required>
        </div>
        <button type="submit" class="btn btn-primary full-width">Login</button>
      </form>

      <form class="auth-form hidden" id="signupForm">
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="signupEmail" placeholder="Enter your email" required>
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" id="signupPassword" placeholder="Create a password" required>
        </div>
        <div class="form-group">
          <label>Confirm Password</label>
          <input type="password" id="confirmPassword" placeholder="Confirm your password" required>
        </div>
        <button type="submit" class="btn btn-primary full-width">Sign Up</button>
      </form>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">
    <div id="toastMessage"></div>
  </div>

  <script>
    // State
    let isLoggedIn = sessionStorage.getItem('isLoggedIn') === 'true';

    // Elements
    const homePage = document.getElementById('homePage');
    const controlPage = document.getElementById('controlPage');
    const authModal = document.getElementById('authModal');
    const navControlLink = document.getElementById('navControlLink');
    const navAuthLink = document.getElementById('navAuthLink');
    const heroCtaBtn = document.getElementById('heroCtaBtn');
    const homeBtn = document.getElementById('homeBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const closeAuthModal = document.getElementById('closeAuthModal');
    const loginTab = document.getElementById('loginTab');
    const signupTab = document.getElementById('signupTab');
    const loginForm = document.getElementById('loginForm');
    const signupForm = document.getElementById('signupForm');

    // Toast
    function showToast(message) {
      const toast = document.getElementById('toast');
      document.getElementById('toastMessage').textContent = message;
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }

    // Navigation
    function showHome() {
      homePage.classList.add('active');
      controlPage.classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    function showControl() {
      if (!isLoggedIn) {
        showAuthModal();
        return;
      }
      homePage.classList.remove('active');
      controlPage.classList.add('active');
      document.body.style.overflow = 'auto';
    }

    function showAuthModal() {
      authModal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function hideAuthModal() {
      authModal.classList.remove('active');
      document.body.style.overflow = 'auto';
    }

    function updateNav() {
      if (isLoggedIn) {
        navAuthLink.textContent = 'Logout';
        heroCtaBtn.textContent = 'Control Your Robot';
      } else {
        navAuthLink.textContent = 'Login';
        heroCtaBtn.textContent = 'Login to Get Started';
      }
    }

    // Event Listeners
    navControlLink.addEventListener('click', showControl);
    heroCtaBtn.addEventListener('click', () => isLoggedIn ? showControl() : showAuthModal());
    homeBtn.addEventListener('click', showHome);
    closeAuthModal.addEventListener('click', hideAuthModal);
    
    navAuthLink.addEventListener('click', () => {
      if (isLoggedIn) {
        isLoggedIn = false;
        sessionStorage.removeItem('isLoggedIn');
        showToast('Logged out successfully');
        showHome();
        updateNav();
      } else {
        showAuthModal();
      }
    });

    logoutBtn.addEventListener('click', () => {
      isLoggedIn = false;
      sessionStorage.removeItem('isLoggedIn');
      showToast('Logged out successfully');
      showHome();
      updateNav();
    });

    // Auth Tabs
    loginTab.addEventListener('click', () => {
      loginTab.classList.add('active');
      signupTab.classList.remove('active');
      loginForm.classList.remove('hidden');
      signupForm.classList.add('hidden');
    });

    signupTab.addEventListener('click', () => {
      signupTab.classList.add('active');
      loginTab.classList.remove('active');
      signupForm.classList.remove('hidden');
      loginForm.classList.add('hidden');
    });

    // Login
    loginForm.addEventListener('submit', (e) => {
      e.preventDefault();
      isLoggedIn = true;
      sessionStorage.setItem('isLoggedIn', 'true');
      showToast('Login successful!');
      hideAuthModal();
      updateNav();
      showControl();
    });

    // Signup
    signupForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const password = document.getElementById('signupPassword').value;
      const confirm = document.getElementById('confirmPassword').value;
      if (password !== confirm) {
        showToast('Passwords do not match');
        return;
      }
      isLoggedIn = true;
      sessionStorage.setItem('isLoggedIn', 'true');
      showToast('Account created successfully!');
      hideAuthModal();
      updateNav();
      showControl();
    });

    // Drive Controls
    document.querySelectorAll('.drive-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const direction = btn.dataset.direction;
        showToast(`Driving ${direction}`);
      });
    });

    // WASD Controls
    document.addEventListener('keydown', (e) => {
      if (!controlPage.classList.contains('active')) return;
      const key = e.key.toLowerCase();
      const directions = { w: 'forward', a: 'left', s: 'backward', d: 'right' };
      if (directions[key]) {
        showToast(`Driving ${directions[key]}`);
      }
    });

    // Pump Toggle
    document.getElementById('pumpToggle').addEventListener('change', (e) => {
      showToast(e.target.checked ? 'Pump ON' : 'Pump OFF');
    });

    // Arms Toggle
    document.getElementById('armsToggle').addEventListener('change', (e) => {
      const label = document.getElementById('armsLabel');
      if (e.target.checked) {
        label.textContent = 'ü§ñ Arms (180¬∞)';
        showToast('Arms Open (180¬∞)');
      } else {
        label.textContent = 'ü§ñ Arms (90¬∞)';
        showToast('Arms Closed (90¬∞)');
      }
    });

    // Capture Photo
    document.getElementById('captureBtn').addEventListener('click', () => {
      showToast('Photo captured!');
    });

    // Initialize
    updateNav();
  </script>
</body>
</html>
